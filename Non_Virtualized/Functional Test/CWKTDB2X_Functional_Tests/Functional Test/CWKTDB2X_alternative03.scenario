<?xml version="1.0" encoding="UTF-8"?>
<XaUnit xmlns="http://www.xact.dk/xatester/v/1" xmlns:data="http://www.xact.dk/xatester/data/v/1" componentNameUnderTest="cwktdb2x">
  <Test>
    <Scope name="Settings" disabled="false">
      <Variable id="employeeFileName">HDDRXM0.RT.CWKTDATA</Variable>
      <Variable id="reportFileNameActual">HDDRXM0.RT.KTDEMO.RPTFILE</Variable>
    </Scope>
    <Scope name="Initialization" disabled="false">
      <SQLUpdate name="SQLUpdate">
        <Statement><![CDATA[DELETE FROM HDDRXM0.KT_DEMOTAB 
;]]></Statement>
      </SQLUpdate>
      <Variable id="employeeRecords" filePath="Data/employee_records.xml" />
      <WriteRemoteFile fileName="${employeeFileName}" id="writeEmployeeFile" label="Write Employee File" mDataDefinitionName="EMPFILE1" recordLength="80" recordFormat="FB" blockSize="27920" volumnName="PCC006" unitName="" unitType="TRK" primaryAllocation="15" secondaryAllocation="5" directoryBlockCount="0" datasetType="BASIC" memberName="" disposition="Old" referencedId="employeeRecords" />
      <IterateData id="loopThroughEmployeeRecords" referencedId="employeeRecords" dataPath="">
        <Variable id="wa_emp_num">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-num']]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <Variable id="wa_emp_type">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-type']]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <Variable id="wa_emp_region">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-region']]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <Variable id="wa_emp_name">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-name']]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <Variable id="wa_emp_street">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-address']['wa-emp-street']]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <Variable id="wa_emp_city">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-address']['wa-emp-city']]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <Variable id="wa_emp_state">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-address']['wa-emp-state']]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <Variable id="wa_emp_zip">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-address']['wa-emp-zip']]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <Variable id="wa_emp_hire_date">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-hire-date']['wa-emp-hire-yy'].concat(
employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-hire-date']['wa-emp-hire-mm'],
employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-emp-hire-date']['wa-emp-hire-dd']
)]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <Variable id="wa_emp_hours">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-hourly-employee-data']['wa-emp-hours']]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <Variable id="wa_emp_rate">
          <data:Replaceable>
            <Expression>
              <Statement><![CDATA[employeeRecords.record[loopThroughEmployeeRecordsIndex]['employee-work-area']['wa-hourly-employee-data']['wa-emp-rate']]]></Statement>
            </Expression>
          </data:Replaceable>
        </Variable>
        <SQLUpdate name="SQLUpdate">
          <Statement><![CDATA[INSERT INTO HDDRXM0.KT_DEMOTAB 
  (
	EMP_NUM,
	WAGE_TYPE,
	REGION,
	FIRST_LAST_NAME,
	STREET_ADDR,
	CITY,
	STATE,
	ZIP,
	HIREDATE,
	HOURS,
	RATE,
	WAGES,
	OVERTIME,
	COMM
  )
VALUES 
  (
	'${wa_emp_num}',
	'${wa_emp_type}',
	'${wa_emp_region}',
	'${wa_emp_name}',
	'${wa_emp_street}',
	'${wa_emp_city}',
	'${wa_emp_state}',
	'${wa_emp_zip}',
	'${wa_emp_hire_date}',
	'${wa_emp_hours}',
	'${wa_emp_rate}',
	0,
	0,
	0
  );]]></Statement>
        </SQLUpdate>
      </IterateData>
    </Scope>
    <Scope name="Test Execution" disabled="false">
      <Component label="CWKTDB2X" moduleName="CWKTDB2X" programExitVerify="value &lt; 8" rollback="false">
        <Data>
          <parminfo>
            <parm-lth>5</parm-lth>
            <parm-data>00001</parm-data>
            <grand-total expected="7160" />
            <total-record expected="8" />
          </parminfo>
        </Data>
        <Setup>
          <Content><![CDATA[//EMPFILE  DD DISP=SHR,DSN=${employeeFileName}
//RPTFILE  DD DISP=SHR,DSN=${reportFileNameActual}
//*RPTFILE  DD SYSOUT=*]]></Content>
        </Setup>
      </Component>
    </Scope>
  </Test>
  <MetaData>
    <MDataDefinition name="employeeFileStructure">
      <WA-EMP-NUM type="NumericDisplay" length="5" bytes="5" native="05 WA-EMP-NUM PIC 9(5)." signed="false" decimals="0" />
      <WA-EMP-TYPE type="Character" length="1" bytes="1" native="05 WA-EMP-TYPE PIC X." />
      <WA-EMP-REGION type="NumericDisplay" length="1" bytes="1" native="05 WA-EMP-REGION PIC 9." signed="false" decimals="0" />
      <WA-EMP-NAME type="Character" length="15" bytes="15" native="05 WA-EMP-NAME PIC X(15)." />
      <WA-EMP-STREET type="Character" length="15" bytes="15" native="10 WA-EMP-STREET PIC X(15)." />
      <WA-EMP-CITY type="Character" length="8" bytes="8" native="10 WA-EMP-CITY PIC X(8)." />
      <WA-EMP-STATE type="Character" length="2" bytes="2" native="10 WA-EMP-STATE PIC XX." />
      <WA-EMP-ZIP type="Character" length="9" bytes="9" native="10 WA-EMP-ZIP PIC X(9)." />
      <WA-EMP-HOURS type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HOURS PIC 9(2)." signed="false" decimals="0" />
      <WA-EMP-RATE type="NumericPacked" length="3" bytes="3" native="10 WA-EMP-RATE PIC 9(3)V99 COMP-3." signed="false" decimals="2" />
      <FILLER1 type="Character" length="8" bytes="8" native="10 FILLER PIC X(8)." />
      <WA-EMP-HIRE-YY type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HIRE-YY PIC 9(2)." signed="false" decimals="0" />
      <WA-EMP-HIRE-MM type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HIRE-MM PIC 9(2)." signed="false" decimals="0" />
      <WA-EMP-HIRE-DD type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HIRE-DD PIC 9(2)." signed="false" decimals="0" />
      <FILLER2 type="Character" length="5" bytes="5" native="10 FILLER PIC X(5)." />
    </MDataDefinition>
    <MDataDefinition name="EMPFILE1">
      <employee-work-area native="01 EMPLOYEE-WORK-AREA.">
        <wa-emp-num type="NumericDisplay" length="5" bytes="5" native="05 WA-EMP-NUM PIC 9(5)." signed="false" decimals="0" />
        <wa-emp-type type="Character" length="1" bytes="1" native="05 WA-EMP-TYPE PIC X." />
        <wa-emp-region type="NumericDisplay" length="1" bytes="1" native="05 WA-EMP-REGION PIC 9." signed="false" decimals="0" />
        <wa-emp-name type="Character" length="15" bytes="15" native="05 WA-EMP-NAME PIC X(15)." />
        <wa-emp-address native="05 WA-EMP-ADDRESS.">
          <wa-emp-street type="Character" length="15" bytes="15" native="10 WA-EMP-STREET PIC X(15)." />
          <wa-emp-city type="Character" length="8" bytes="8" native="10 WA-EMP-CITY PIC X(8)." />
          <wa-emp-state type="Character" length="2" bytes="2" native="10 WA-EMP-STATE PIC XX." />
          <wa-emp-zip type="Character" length="9" bytes="9" native="10 WA-EMP-ZIP PIC X(9)." />
        </wa-emp-address>
        <wa-hourly-employee-data native="05 WA-HOURLY-EMPLOYEE-DATA.">
          <wa-emp-hours type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HOURS PIC 9(2)." signed="false" decimals="0" />
          <wa-emp-rate type="NumericPacked" length="3" bytes="3" native="10 WA-EMP-RATE PIC 9(3)V99 COMP-3." signed="false" decimals="2" />
          <filler1 type="Character" length="8" bytes="8" native="10 FILLER PIC X(8)." />
        </wa-hourly-employee-data>
        <wa-emp-hire-date native="05 WA-EMP-HIRE-DATE.">
          <wa-emp-hire-yy type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HIRE-YY PIC 9(2)." signed="false" decimals="0" />
          <wa-emp-hire-mm type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HIRE-MM PIC 9(2)." signed="false" decimals="0" />
          <wa-emp-hire-dd type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HIRE-DD PIC 9(2)." signed="false" decimals="0" />
        </wa-emp-hire-date>
        <filler1 type="Character" length="5" bytes="5" native="05 FILLER PIC X(5)." />
      </employee-work-area>
    </MDataDefinition>
    <MDataDefinition name="EMPFILE2">
      <WA-EMP-NUM type="NumericDisplay" length="5" bytes="5" native="05 WA-EMP-NUM PIC 9(5)." signed="false" decimals="0" />
      <WA-EMP-TYPE type="Character" length="1" bytes="1" native="05 WA-EMP-TYPE PIC X." />
      <WA-EMP-REGION type="NumericDisplay" length="1" bytes="1" native="05 WA-EMP-REGION PIC 9." signed="false" decimals="0" />
      <WA-EMP-NAME type="Character" length="15" bytes="15" native="05 WA-EMP-NAME PIC X(15)." />
      <WA-EMP-STREET type="Character" length="15" bytes="15" native="10 WA-EMP-STREET PIC X(15)." />
      <WA-EMP-CITY type="Character" length="8" bytes="8" native="10 WA-EMP-CITY PIC X(8)." />
      <WA-EMP-STATE type="Character" length="2" bytes="2" native="10 WA-EMP-STATE PIC XX." />
      <WA-EMP-ZIP type="Character" length="9" bytes="9" native="10 WA-EMP-ZIP PIC X(9)." />
      <WA-EMP-HOURS type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HOURS PIC 9(2)." signed="false" decimals="0" />
      <WA-EMP-RATE type="NumericPacked" length="3" bytes="3" native="10 WA-EMP-RATE PIC 9(3)V99 COMP-3." signed="false" decimals="2" />
      <FILLER1 type="Character" length="8" bytes="8" native="10 FILLER PIC X(8)." />
      <WA-EMP-HIRE-YY type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HIRE-YY PIC 9(2)." signed="false" decimals="0" />
      <WA-EMP-HIRE-MM type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HIRE-MM PIC 9(2)." signed="false" decimals="0" />
      <WA-EMP-HIRE-DD type="NumericDisplay" length="2" bytes="2" native="10 WA-EMP-HIRE-DD PIC 9(2)." signed="false" decimals="0" />
      <FILLER2 type="Character" length="5" bytes="5" native="05 FILLER PIC X(5)." />
    </MDataDefinition>
    <Component name="CWKTDB2X" type="COBOL">
      <INOUT>
        <parminfo>
          <parm-lth type="NumericBinary" length="4" bytes="2" signed="true" decimals="0" />
          <parm-data type="Character" length="5" bytes="5" />
          <grand-total type="NumericBinary" length="7" bytes="4" signed="true" decimals="0" />
          <total-record type="NumericDisplay" length="3" bytes="3" signed="false" decimals="0" />
        </parminfo>
      </INOUT>
    </Component>
  </MetaData>
</XaUnit>
